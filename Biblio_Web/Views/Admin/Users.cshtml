@using Biblio_Models.Entiteiten
@using Microsoft.AspNetCore.Identity
@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer
@model IEnumerable<UserViewModel>
@{
    ViewData["Title"] = "Gebruikersbeheer";
}

<h1>Gebruikers</h1>
<table class="table table-striped">
    <thead>
        <tr>
            <th>@Localizer["User"]</th>
            <th>@Localizer["Email"]</th>
            <th>Rollen</th>
            <th>Geblokkeerd</th>
            <th>Acties</th>
        </tr>
    </thead>
    <tbody>
@foreach(var u in Model)
{
    <tr>
        <td>@u.UserName</td>
        <td>@u.Email</td>
        <td>@(string.Join(", ", u.Roles ?? new List<string>()))</td>
        <td>@(u.Blocked ? "Ja" : "Nee")</td>
        <td>
            <a class="btn btn-sm btn-primary" asp-action="EditRoles" asp-route-id="@u.Id">Rollen</a>
            <form asp-controller="Account" asp-action="ToggleBlock" method="post" class="d-inline">
                @Html.AntiForgeryToken()
                <input type="hidden" name="id" value="@u.Id" />
                <button type="submit" class="btn btn-sm btn-warning">@(u.Blocked ? "Deblokkeer" : "Blokkeer")</button>
            </form>
            <a class="btn btn-sm btn-primary ms-1" asp-controller="Account" asp-action="UserRoles" asp-route-id="@u.Id">Rollen</a>
        </td>
    </tr>
}
    </tbody>
</table>