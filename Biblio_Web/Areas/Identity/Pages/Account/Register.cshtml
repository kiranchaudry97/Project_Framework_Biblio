@page
@model Biblio_Web.Areas.Identity.Pages.Account.RegisterModel
@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer
@{
    ViewData["Title"] = Localizer["Register"];
}

<div class="form-centered">
    <div class="text-center mb-3 d-flex justify-content-center align-items-center gap-3">
        <a class="navbar-brand fw-bold fs-4" asp-area="" asp-controller="Home" asp-action="Index">Biblio</a>

        <!-- language selector placed next to logo -->
        <div class="dropdown">
            <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" id="langDropdownRegister" data-bs-toggle="dropdown" aria-expanded="false">@System.Globalization.CultureInfo.CurrentUICulture.TwoLetterISOLanguageName.ToUpper()</button>
            <ul class="dropdown-menu" aria-labelledby="langDropdownRegister">
                <li><a class="dropdown-item" asp-controller="Culture" asp-action="SetLanguage" asp-route-culture="nl" asp-route-returnUrl="@(Request.Path + Request.QueryString)">NL</a></li>
                <li><a class="dropdown-item" asp-controller="Culture" asp-action="SetLanguage" asp-route-culture="en" asp-route-returnUrl="@(Request.Path + Request.QueryString)">EN</a></li>
            </ul>
        </div>
    </div>

    <h1 class="h3 mb-3 fw-semibold text-center">@ViewData["Title"]</h1>

    <form method="post" class="needs-validation" novalidate>
        <partial name="_ValidationScriptsPartial" />
        <div asp-validation-summary="All" class="text-danger mb-2"></div>

        <div class="mx-auto" style="max-width:420px;">
            <div class="form-floating mb-3">
                <input asp-for="Input.Email" class="form-control form-control-sm" maxlength="254" />
                <label asp-for="Input.Email">@Localizer["Email"]</label>
                <span asp-validation-for="Input.Email" class="text-danger small"></span>
            </div>

            <div class="form-floating mb-3">
                <input asp-for="Input.FullName" class="form-control form-control-sm" maxlength="200" />
                <label asp-for="Input.FullName">@Localizer["Full name"]</label>
                <span asp-validation-for="Input.FullName" class="text-danger small"></span>
            </div>

            <div class="form-floating mb-3">
                <input asp-for="Input.Password" id="Input_Password" type="password" class="form-control form-control-sm" maxlength="100" />
                <label asp-for="Input.Password">@Localizer["Password"]</label>
                <span asp-validation-for="Input.Password" class="text-danger small"></span>
            </div>

            <div class="form-floating mb-3">
                <input asp-for="Input.ConfirmPassword" id="Input_ConfirmPassword" type="password" class="form-control form-control-sm" maxlength="100" />
                <label asp-for="Input.ConfirmPassword">@Localizer["Confirm password"]</label>
                <span asp-validation-for="Input.ConfirmPassword" class="text-danger small"></span>
            </div>

            <div class="form-check mt-2 mb-3">
                <input class="form-check-input" type="checkbox" value="" id="showPasswordCheckRegister" />
                <label class="form-check-label small" for="showPasswordCheckRegister">@Localizer["Show Password"]</label>
            </div>

            <button type="submit" class="btn btn-primary btn-sm mx-auto d-block mb-2" style="min-width:140px;">@Localizer["Register"]</button>

            <div class="text-center small mt-2">
                <a asp-page="./Login" class="mx-2">@Localizer["Login Link"]</a>
            </div>
        </div>
    </form>
</div>

@section Scripts{
    <partial name="_ValidationScriptsPartial" />
    <script>
        (function(){
            const pwd = document.getElementById('Input_Password');
            const confirm = document.getElementById('Input_ConfirmPassword');
            const chk = document.getElementById('showPasswordCheckRegister');
            if (!pwd || !confirm || !chk) return;
            chk.addEventListener('change', function(){
                const t = this.checked ? 'text' : 'password';
                pwd.type = t; confirm.type = t;
            });
        })();
    </script>
}
