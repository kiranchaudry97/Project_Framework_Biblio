<?xml version="1.0" encoding="utf-8" ?>
<?xaml-comp compile="true" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodel="clr-namespace:Biblio_App.ViewModels"
             x:Class="Biblio_App.Pages.InstellingenPagina"
             x:DataType="viewmodel:InstellingenViewModel"
             Title="Instellingen"
             x:Name="Page">

    <Shell.TitleView>
        <Grid Padding="0,0,8,0" VerticalOptions="Center">
            <Label x:Name="TitleLabel" Text="Instellingen" FontSize="22" FontAttributes="Bold" VerticalOptions="Center" TextColor="{StaticResource White}" />
        </Grid>
    </Shell.TitleView>

    <VerticalStackLayout Padding="20" Spacing="12">
        <Label x:Name="HeaderLabel" Text="Instellingen" Style="{StaticResource PageHeaderLabel}" />

        <Frame Style="{StaticResource WelcomeCardStyle}">
            <VerticalStackLayout Spacing="12">
                <Label x:Name="LanguageLabel" Text="Taal" />
                <HorizontalStackLayout Spacing="8">
                    <Picker x:Name="LanguagePicker" ItemsSource="{Binding Languages}" SelectedItem="{Binding SelectedLanguage}" />
                </HorizontalStackLayout>

                <Label x:Name="SyncLabel" Text="Synchronisatie" />
                <Switch x:Name="AutoSyncSwitch" IsToggled="{Binding AutoSync}" />

                <HorizontalStackLayout Spacing="12" HorizontalOptions="End">
                    <Button x:Name="SyncNowButton" Text="Synchroniseer nu" Command="{Binding SyncNowCommand}" Style="{StaticResource PrimaryButton}" IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBooleanConverter}}" />
                    <Button x:Name="CheckApiButton" Text="Controleer API" Command="{Binding CheckApiCommand}" Style="{StaticResource OutlineActionButton}" />
                </HorizontalStackLayout>

                <Label x:Name="StatusLabel" Text="Status:" />
                <Label Text="{Binding StatusMessage}" />

                <BoxView HeightRequest="1" Color="{StaticResource Gray100}" />

                <Label x:Name="DatabaseHeaderLabel" Text="Database" FontAttributes="Bold" />
                <Label Text="{Binding DatabaseInfo}" />
                <Button x:Name="LoadDbButton" Text="Laad database info" Command="{Binding LoadDatabaseInfoCommand}" />
                <Button x:Name="ResetDbButton" Text="Reset lokale DB" Clicked="OnResetDbClicked" />
            </VerticalStackLayout>
        </Frame>

    </VerticalStackLayout>
</ContentPage>