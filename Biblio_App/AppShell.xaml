<?xml version="1.0" encoding="utf-8" ?>
<Shell
    x:Class="Biblio_App.AppShell"
    x:Name="This"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:pages="clr-namespace:Biblio_App.Pages"
    xmlns:local="clr-namespace:Biblio_App"
    Title="Biblio"
    Shell.TabBarIsVisible="False">

    <Shell.Resources>
        <!-- Make flyout item text orange for better contrast per request -->
        <Color x:Key="ShellForegroundColor">#FFA500</Color>
        <Color x:Key="ShellUnselectedColor">#FFA500</Color>
        <SolidColorBrush x:Key="ShellForegroundBrush" Color="#FFA500" />
    </Shell.Resources>

    <!-- Flyout header with title and theme toggle (language picker removed - use Settings page) -->
    <Shell.FlyoutHeader>
        <Grid Padding="12" BackgroundColor="{StaticResource Primary}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Label Text="{Binding BiblioTitle, Source={x:Reference This}}" FontAttributes="Bold" FontSize="18" VerticalOptions="Center" TextColor="{StaticResource White}" />

            <!-- Theme toggle placed at the right -->
            <Button x:Name="ThemeToggleButton" Grid.Column="1" WidthRequest="52" HeightRequest="44" Margin="8,0" Clicked="OnThemeToggleClicked" BackgroundColor="Transparent" />

        </Grid>
    </Shell.FlyoutHeader>

    <!-- Use emoji prefixes as lightweight icons so no extra image files are required -->
    <FlyoutItem Title="{Binding MenuTitle, Source={x:Reference This}}" FlyoutDisplayOptions="AsMultipleItems">
        <!-- add explicit Route so we can navigate via absolute route to the flyout item -->
        <ShellContent x:Name="BooksShell" Route="BoekenShell" Title="{Binding BooksShellTitle, Source={x:Reference This}}" ContentTemplate="{DataTemplate pages:BoekenPagina}" />
        <ShellContent x:Name="MembersShell" Title="{Binding MembersShellTitle, Source={x:Reference This}}" ContentTemplate="{DataTemplate pages:LedenPagina}" />
        <ShellContent x:Name="LoansShell" Title="{Binding LoansShellTitle, Source={x:Reference This}}" ContentTemplate="{DataTemplate pages:UitleningenPagina}" />
        <ShellContent x:Name="CategoriesShell" Title="{Binding CategoriesShellTitle, Source={x:Reference This}}" ContentTemplate="{DataTemplate pages:CategorieenPagina}" />
        <ShellContent x:Name="SettingsShell" Title="{Binding SettingsShellTitle, Source={x:Reference This}}" ContentTemplate="{DataTemplate pages:InstellingenPagina}" />
    </FlyoutItem>

    <!-- Profile / account menu items -->
    <MenuItem x:Name="ProfileMenuItem" Text="{Binding ProfileMenuText, Source={x:Reference This}}" Clicked="OnProfileClicked" />
    <MenuItem x:Name="LogoutMenuItem" Text="{Binding LogoutMenuText, Source={x:Reference This}}" Clicked="OnLogoutClicked" />

    <!-- Quick actions in the flyout footer -->
    <Shell.FlyoutFooter>
        <VerticalStackLayout Padding="12" Spacing="8" BackgroundColor="{StaticResource Primary}">
            <Label x:Name="QuickLabel" Text="{Binding QuickLabelText, Source={x:Reference This}}" FontSize="14" TextColor="{StaticResource White}" />
            <Button Text="{Binding QuickNewBookButtonText, Source={x:Reference This}}" BackgroundColor="{StaticResource Primary}" TextColor="{StaticResource White}" Clicked="QuickNewBook_Clicked" x:Name="QuickNewBookButton" />
            <Button Text="{Binding QuickNewMemberButtonText, Source={x:Reference This}}" BackgroundColor="{StaticResource Primary}" TextColor="{StaticResource White}" Clicked="QuickNewMember_Clicked" x:Name="QuickNewMemberButton" />
            <!-- Quick link to settings kept in footer as convenience (can be removed if undesired) -->
            <Button x:Name="FooterSettingsButton" Text="{Binding FooterSettingsText, Source={x:Reference This}}" BackgroundColor="{StaticResource Primary}" TextColor="{StaticResource White}" Command="{Binding Source={x:Static local:AppShell.Instance}, Path=OpenSettingsCommand}" />
        </VerticalStackLayout>
    </Shell.FlyoutFooter>

</Shell>
